import{E as i,G as s}from"./index-76ebd2e9.js";const{VITE_URL:o,VITE_PATH:r}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"harper",BASE_URL:"/mini_fish_tank/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},n=i("cart",{state:()=>({carts:[],cartNum:0,total:0,final_total:0}),actions:{getCart(){s.get(`${o}/v2/api/${r}/cart`).then(t=>{this.carts=t.data.data.carts,this.cartNum=this.carts.length,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.renewCartNum()})},deleteAllCarts(){const t=`${o}/v2/api/${r}/carts`;s.delete(t).then(a=>{alert(a.data.message),this.getCart()}).catch(a=>{alert(a.response.data.message)})},addToCart(t,a=1){const c={product_id:t,qty:a};s.post(`${o}/v2/api/${r}/cart`,{data:c}).then(e=>{console.log("加入購物車:",e.data),this.getCart()})},renewCartNum(){this.cartNum>0&&(this.cartNum=0,Object.values(this.carts).forEach(t=>{this.cartNum+=t.qty}))},modifyCart(t,a){switch(a){case"reduce":t.qty>1&&(t.qty-=1);break;case"increase":t.qty+=1;break}let c={product_id:t.product.id,qty:t.qty};s.put(`${o}/v2/api/${r}/cart/${t.id}`,{data:c}).then(e=>{console.log("更新購物車:",e.data),this.getCart()})},deleteItem(t){s.delete(`${o}/v2/api/${r}/cart/${t.id}`).then(a=>{console.log("刪除購物車:",a.data),this.getCart()})},addCouponCode(t){const a=`${o}/api/${r}/coupon`,c={code:t};s.post(a,{data:c}).then(e=>{console.log(e),this.getCart()}).catch(e=>{console.log(e)})}},getters:{}});export{n as c};
